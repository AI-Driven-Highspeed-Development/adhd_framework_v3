---
description: Update ADHD module dependencies in pyproject.toml
agent: HyperArch
---

# Update Requirements

Update all module dependencies across the ADHD project using import analysis.

## ⚠️ CRITICAL: DO NOT EDIT THIS FILE

User instructions like "include dev modules too" are **RUNTIME PARAMETERS**.  
They mean: apply the workflow to dev modules as well.  
They do NOT mean: modify this prompt file.

**NEVER edit this `.prompt.md` file based on user instructions.**

## Workflow (Using adhd_mcp)

### Step 1: Scan All Modules with Import Analysis
Call `list_modules(with_imports=True)` to get:
```python
{
  "modules": [{
    "name": "kanbn_mcp",
    "imports": {
      "adhd": ["logger_util", "config_manager"],
      "third_party": ["yaml", "mcp.server.fastmcp"]
    },
    "init_yaml_requirements": [],
    "requirements_txt": ["PyYAML>=6.0", "mcp>=1.2.0"]
  }]
}
```

### Step 2: Analyze Gaps
For each module, compare:
- `imports.adhd` vs `pyproject.toml` `[project].dependencies` → find missing ADHD deps
- `imports.third_party` vs `pyproject.toml` `[project].dependencies` → find missing PyPI packages

### Step 3: Map Import Names to Package Names
Use your knowledge to map:
- `yaml` → `PyYAML`
- `mcp.server.fastmcp` → `mcp`
- `logger_util` → `logger-util` (hyphenated package name in pyproject.toml)

### Step 4: Edit pyproject.toml Directly
Update `[project].dependencies` in each module's `pyproject.toml` with missing deps.

---

## Task: Update Module Dependencies (pyproject.toml)

All dependencies (both ADHD modules and PyPI packages) go in `[project].dependencies`:
```toml
[project]
dependencies = [
    "logger-util",
    "config-manager",
    "PyYAML>=6.0",
]
```

ADHD workspace dependencies are resolved automatically via the root `[tool.uv.sources]`.

---

## Example Analysis

If a module has:
```python
imports.adhd = ["logger_util", "config_manager"]
# But pyproject.toml [project].dependencies is empty!
```

Then add to `pyproject.toml`:
```toml
[project]
dependencies = [
    "logger-util",
    "config-manager",
]
```

---

## Scope

**Default behavior**: Process all modules.
**Transitive dependencies are OK**: Only list DIRECT dependencies.
